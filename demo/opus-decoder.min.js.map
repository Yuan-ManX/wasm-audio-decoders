{"version":3,"sources":["opus-decoder.js"],"names":["global","factory","this","exports","Worker","_interopDefaultLegacy","e","default","Worker__default","WASMAudioDecoderCommon","caller","uint8Array","Uint8Array","float32Array","Float32Array","modules","Object","defineProperties","value","WeakMap","setModule","Ref","module","set","Promise","resolve","getModule","wasm","get","WebAssembly","compile","decodeDynString","inflateDynEncodeString","string","length","then","data","concatFloat32","buffers","ret","i","offset","getDecodedAudio","channelData","samplesDecoded","sampleRate","getDecodedAudioMultiChannel","input","channelsDecoded","j","channel","push","source","output","parseInt","substring","offsetReverse","byte","escaped","byteIndex","charCodeAt","subarray","destLength","puffString","String","raw","instantiate","instanceExports","Map","entries","puff","buffer","heapView","DataView","heapPos","destPtr","destBuf","destLengthPtr","setUint32","sourcePtr","sourceLength","sourceLengthPtr","defineProperty","enumerable","_wasm","getOutputChannels","outputData","slice","allocateTypedArray","len","TypedArray","ptr","_malloc","BYTES_PER_ELEMENT","_pointers","add","buf","HEAP","free","forEach","_free","clear","_module","_EmscriptenWASM","_inputSize","_outputChannels","_outputChannelSize","Set","ready","_input","_output","WASMAudioDecoderWorker","constructor","options","name","Decoder","EmscriptenWASM","webworkerSourceCode","_options","_Decoder","_WASMAudioDecoderCommon","moduleResolve","modulePromise","decoder","self","onmessage","id","command","isWebWorker","postMessage","reset","Array","isArray","map","console","error","JSON","stringify","type","URL","createObjectURL","Blob","Buffer","from","toString","super","_id","Number","MIN_SAFE_INTEGER","_enqueuedOperations","rest","delete","compiled","_postToDecoder","async","finally","terminate","base64ReverseLookup","HEAPU8","_opus_frame_decoder_create","_opus_frame_decode_float_deinterleaved","_opus_frame_decoder_destroy","imports","a","b","x","Math","cos","exp","d","dest","src","num","copyWithin","c","requestedSize","what","abort","instance","asm","initRuntime","OpusDecoder","errors","_init","common","_common","mapping","_channels","_channelMappingTable","_decoder","_streamCount","_coupledStreamCount","_preSkip","_ready","_decode","opusFrame","Error","decodeFrame","decodeFrames","opusFrames","outputBuffers","outputSamples","_isWebWorker","isNumber","param","channels","streamCount","coupledStreamCount","channelMappingTable","preSkip","OpusDecoderWebWorker","require","define","amd","globalThis"],"mappings":"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"}