{"version":3,"sources":["ogg-opus-decoder.js"],"names":["global","factory","this","exports","Worker","_interopDefaultLegacy","e","default","Worker__default","WASMAudioDecoderCommon","caller","uint8Array","Uint8Array","float32Array","Float32Array","modules","Object","defineProperties","value","WeakMap","setModule","Ref","module","set","Promise","resolve","getModule","wasmString","get","WebAssembly","compile","decodeDynString","wasm","inflateDynEncodeString","then","data","concatFloat32","buffers","length","ret","i","offset","getDecodedAudio","channelData","samplesDecoded","sampleRate","getDecodedAudioMultiChannel","input","channelsDecoded","j","channel","push","source","output","parseInt","substring","offsetReverse","byte","escaped","byteIndex","charCodeAt","subarray","puffString","String","raw","instantiate","instanceExports","Map","entries","puff","memory","dataArray","heapView","DataView","heapPos","sourceLength","sourceLengthPtr","setInt32","sourcePtr","destLengthPtr","byteLength","slice","getInt32","defineProperty","enumerable","_wasm","getOutputChannels","outputData","allocateTypedArray","len","TypedArray","ptr","_malloc","BYTES_PER_ELEMENT","_pointers","add","buf","HEAP","free","forEach","_free","clear","_module","_EmscriptenWASM","_inputSize","_outputChannels","_outputChannelSize","Set","ready","_input","_output","WASMAudioDecoderWorker","constructor","options","name","Decoder","EmscriptenWASM","webworkerSourceCode","_options","_Decoder","_WASMAudioDecoderCommon","moduleResolve","modulePromise","decoder","self","onmessage","id","command","isWebWorker","postMessage","reset","Array","isArray","map","buffer","console","error","JSON","stringify","type","URL","createObjectURL","Blob","Buffer","from","toString","super","_id","Number","MIN_SAFE_INTEGER","_enqueuedOperations","rest","delete","compiled","_postToDecoder","async","finally","terminate","base64ReverseLookup","HEAPU8","_ogg_opus_decoder_decode","_ogg_opus_decoder_free","_ogg_opus_decoder_create","imports","a","b","x","Math","cos","exp","d","dest","src","num","copyWithin","c","requestedSize","what","abort","instance","asm","initRuntime","OggOpusDecoder","errors","_init","common","_common","_channelsDecoded","Uint32Array","_decoder","_forceStereo","_ready","decode","Error","decodedSamples","dataLength","dataToSend","dataToSendLength","code","errorCode","_isWebWorker","forceStereo","OggOpusDecoderWebWorker","require","define","amd","globalThis"],"mappings":";AAAA,IAAWA,EAAQC,EAARD,EAIRE,KAJgBD,EAIV,SAAWE,EAASC,GAE3B,SAASC,EAAuBC,GAAK,OAAOA,GAAkB,iBAANA,GAAkB,YAAaA,EAAIA,EAAI,CAAEC,QAAWD,GAE5G,IAAIE,EAA+BH,EAAsBD,GAEzD,SAASK,EAAuBC,GAE9B,MAAMC,EAAaC,WACbC,EAAeC,aAEhBL,EAAuBM,GAC1BC,OAAOC,iBAAiBR,EAAwB,CAC9CM,EAAS,CACPG,MAAO,IAAIC,SAGbC,EAAW,CACTF,MAAMG,EAAKC,GACTb,EAAuBM,EAAQQ,IAAIF,EAAKG,QAAQC,QAAQH,MAI5DI,EAAW,CACTR,MAAMG,EAAKM,GACT,IAAIL,EAASb,EAAuBM,EAAQa,IAAIP,GAiBhD,OAfKC,IACEK,EAMHL,EAASO,YAAYC,QACnBrB,EAAuBsB,EAAgBJ,KANzCA,EAAaN,EAAIW,EACjBV,EAASb,EAAuBwB,EAC9BN,GACAO,MAAMC,GAASN,YAAYC,QAAQK,MAOvC1B,EAAuBM,EAAQQ,IAAIF,EAAKC,IAGnCA,IAIXc,EAAe,CACblB,MAAMmB,EAASC,GACb,IAAIC,EAAM,IAAI1B,EAAayB,GACzBE,EAAI,EACJC,EAAS,EAEX,KAAOD,EAAIH,EAAQC,QACjBC,EAAIhB,IAAIc,EAAQG,GAAIC,GACpBA,GAAUJ,EAAQG,KAAKF,OAGzB,OAAOC,IAIXG,EAAiB,CACfxB,MAAO,CAACyB,EAAaC,EAAgBC,KAAe,CAClDF,YAAAA,EACAC,eAAAA,EACAC,WAAAA,KAIJC,EAA6B,CAC3B5B,MAAM6B,EAAOC,EAAiBJ,EAAgBC,GAC5C,IACEL,EACAS,EAFEN,EAAc,GAIlB,IAAKH,EAAI,EAAGA,EAAIQ,EAAiBR,IAAK,CACpC,MAAMU,EAAU,GAChB,IAAKD,EAAI,EAAGA,EAAIF,EAAMT,QAAUY,EAAQC,KAAKJ,EAAME,KAAKT,IACxDG,EAAYQ,KACV1C,EAAuB2B,EAAcc,EAASN,IAIlD,OAAOnC,EAAuBiC,EAC5BC,EACAC,EACAC,KAWNd,EAAiB,CACfb,MAAMkC,GACJ,MAAMC,EAAS,IAAI1C,EAAWyC,EAAOd,QAC/BG,EAASa,SAASF,EAAOG,UAAU,GAAI,IAAK,IAC5CC,EAAgB,IAAMf,EAE5B,IAEEgB,EAFEC,GAAU,EACZC,EAAY,EAEZnB,EAAI,GAEN,KAAOA,EAAIY,EAAOd,QAChBmB,EAAOL,EAAOQ,WAAWpB,KAEZ,KAATiB,GAAgBC,GAKhBA,IACFA,GAAU,EACVD,GAAQ,IAGVJ,EAAOM,KACLF,EAAOhB,GAAUgB,EAAO,EAAIA,EAAOD,EAAgBC,EAAOhB,GAV1DiB,GAAU,EAad,OAAOL,EAAOQ,SAAS,EAAGF,KAI9B1B,EAAwB,CACtBf,MAAMkC,GAGJ,OAFAA,EAAS3C,EAAuBsB,EAAgBqB,GAEzC,IAAI5B,SAASC,IAElB,MAAMqC,EAAaC,OAAOC,GAAG,olFAE7BvD,EAAuBiB,EAAUjB,EAAwBqD,GACtD5B,MAAMF,GAASH,YAAYoC,YAAYjC,EAAM,MAC7CE,MAAK,EAAG/B,QAAAA,MAEP,MAAM+D,EAAkB,IAAIC,IAAInD,OAAOoD,QAAQjE,IAEzCkE,EAAOH,EAAgBtC,IAAI,QAC3B0C,EAASJ,EAAgBtC,IAAI,UAAkB,OAC/C2C,EAAY,IAAI5D,EAAW2D,GAC3BE,EAAW,IAAIC,SAASH,GAE9B,IAAII,EAAUR,EAAgBtC,IAAI,eAGlC,MAAM+C,EAAevB,EAAOd,OACtBsC,EAAkBF,EACxBA,GAAW,EACXF,EAASK,SAASD,EAAiBD,GAAc,GAGjD,MAAMG,EAAYJ,EAClBA,GAAWC,EACXJ,EAAUhD,IAAI6B,EAAQ0B,GAGtB,MAAMC,EAAgBL,EACtBA,GAAW,EACXF,EAASK,SACPE,EACAR,EAAUS,WAAaN,GACvB,GAIFL,EAAKK,EAASK,EAAeD,EAAWF,GAExCnD,EACE8C,EAAUU,MACRP,EACAA,EAAUF,EAASU,SAASH,GAAe,eAU7D/D,OAAOmE,eAAejF,KAAM,IAAQ,CAClCkF,GAAY,EACZxD,IAAK,IAAM1B,KAAKmF,IAGlBnF,KAAKoF,EAAoB,CAACC,EAAYvC,EAAiBJ,KACrD,IAAIS,EAAS,GACXb,EAAI,EAEN,KAAOA,EAAIQ,GACTK,EAAOF,KACLoC,EAAWN,MACTzC,EAAII,EACJJ,IAAMI,EAAiBA,IAI7B,OAAOS,GAGTnD,KAAKsF,EAAqB,CAACC,EAAKC,KAC9B,MAAMC,EAAMzF,KAAKmF,EAAMO,EAAQF,EAAWG,kBAAoBJ,GAG9D,OAFAvF,KAAK4F,EAAUC,IAAIJ,GAEZ,CACLA,EAAKA,EACLF,EAAKA,EACLO,EAAK,IAAIN,EAAWxF,KAAKmF,EAAMY,EAAMN,EAAKF,KAI9CvF,KAAKgG,KAAO,KACVhG,KAAK4F,EAAUK,SAASR,IACtBzF,KAAKmF,EAAMe,EAAMT,MAEnBzF,KAAK4F,EAAUO,SAGjBnG,KAAK+D,YAAc,KACjB,MAAMqC,EAAU5F,EAAO4F,EACjBC,EAAkB7F,EAAO6F,EACzBC,EAAa9F,EAAO8F,EACpBC,EAAkB/F,EAAO+F,EACzBC,EAAqBhG,EAAOgG,EAOlC,OALIJ,GAAS7F,EAAuBW,EAAUmF,EAAiBD,GAE/DpG,KAAKmF,EAAQ,IAAIkB,EAAgB9F,GAAwBwD,cACzD/D,KAAK4F,EAAY,IAAIa,IAEdzG,KAAKmF,EAAMuB,MAAM1E,MAAK,KAC3BxB,EAAOmG,EAAS3G,KAAKsF,EAAmBgB,EAAY7F,GAGpDD,EAAOoG,EAAU5G,KAAKsF,EACpBiB,EAAkBC,EAClB7F,GAGKX,SAKb,MAAM6G,UAA+BvG,EAAyB,QAC5DwG,YAAYC,EAASC,EAAMC,EAASC,GAC7B3G,EAAuBM,GAAS,IAAIN,EAEzC,IAAI2C,EAAS3C,EAAuBM,EAAQa,IAAIuF,GAEhD,IAAK/D,EAAQ,CACX,MAAMiE,EAGJ,iBAAI,GAAA,EAAEC,EAAUC,EAAUC,EAAyBjB,KAGnD,IAAIkB,EACJ,MAAMC,EAAgB,IAAIlG,SAASC,IACjCgG,EAAgBhG,KAGlB,IAAIkG,EAEJC,KAAKC,UAAY,EAAG1F,MAAQ2F,GAAAA,EAAIC,QAAAA,EAAS5F,KAAAA,OACvC,OAAQ4F,GACN,IAAK,SACH/G,OAAOC,iBAAiBsG,EAAU,CAChC9G,EAAwB,CAAES,MAAOsG,GACjCJ,EAAgB,CAAElG,MAAOqF,GACzBjF,EAAQ,CAAEJ,MAAOiB,GACjB6F,EAAa,CAAE9G,OAAO,KAGxByG,EAAU,IAAIJ,EAASD,GACvBG,IACF,IAAK,QACHC,EAAcxF,MAAK,IACjByF,EAAQf,MAAM1E,MAAK,KACjB0F,KAAKK,YAAY,CACfH,GAAAA,SAIN,MACF,IAAK,OACHH,EAAQzB,OACR0B,KAAKK,YAAY,CACfH,GAAAA,IAEF,MACF,IAAK,QACHH,EAAQO,QAAQhG,MAAK,KACnB0F,KAAKK,YAAY,CACfH,GAAAA,OAGJ,MACF,IAAK,SACL,IAAK,cACL,IAAK,eACH,MAAMnF,YAAEA,EAAWC,eAAEA,EAAcC,WAAEA,GAAe8E,EAClDI,GAGAI,MAAMC,QAAQjG,GACVA,EAAKkG,KAAKlG,GAAS,IAAIvB,WAAWuB,KAClC,IAAIvB,WAAWuB,IAGrByF,KAAKK,YACH,CACEH,GAAAA,EACAnF,YAAAA,EACAC,eAAAA,EACAC,WAAAA,GAIFF,EAAY0F,KAAKnF,GAAYA,EAAQoF,UAEvC,MACF,QACEpI,KAAKqI,QAAQC,MACX,mCAAqCT,WAI7BU,KAAKC,UACrBzB,OACIE,MAAY1G,MAA2B2G,KAEvCuB,EAAO,kBAEb,IAEEvF,EAASwF,IAAIC,gBAAgB,IAAIC,KAAK,CAACzB,GAAsB,CAAEsB,KAAAA,KAC/DlI,EAAuBM,EAAQQ,IAAI4F,EAAS/D,GAC5C,MAEAA,EAAS,QAAQuF,YAAeI,OAAOC,KACvC3B,GACA4B,SAAS,aAIbC,MAAM9F,EAAQ,CAAE8D,KAAAA,IAEhBhH,KAAKiJ,EAAMC,OAAOC,iBAClBnJ,KAAKoJ,EAAsB,IAAInF,IAE/BjE,KAAK2H,UAAY,EAAG1F,KAAAA,MAClB,MAAM2F,GAAEA,KAAOyB,GAASpH,EACxBjC,KAAKoJ,EAAoB1H,IAAIkG,EAA7B5H,CAAiCqJ,GACjCrJ,KAAKoJ,EAAoBE,OAAO1B,IAGlC,IAAIV,EAAe3G,GAAwBiB,IAAYQ,MAAMuH,IAC3DvJ,KAAKwJ,EAAe,SAAUD,MAIlCE,QAAqB5B,EAAS5F,GAC5B,OAAO,IAAIX,SAASC,IAClBvB,KAAK+H,YAAY,CACfF,QAAAA,EACAD,GAAI5H,KAAKiJ,EACThH,KAAAA,IAGFjC,KAAKoJ,EAAoB/H,IAAIrB,KAAKiJ,IAAO1H,MAIzCmF,YACF,OAAO1G,KAAKwJ,EAAe,SAG7BC,mBACQzJ,KAAKwJ,EAAe,QAAQE,SAAQ,KACxC1J,KAAK2J,eAITF,oBACQzJ,KAAKwJ,EAAe,UAS9B,SAAStC,EAAe3G,GAExB,SAASmG,KAMT,IAAK,IAAIkD,EAAsB,IAAIlJ,WAAW,KAAM4B,EAAI,GAAIA,GAAK,IAAKA,EACrEsH,EAAoB,GAAKtH,GAAK,GAAKA,EACnCsH,EAAoB,GAAKtH,GAAKA,EAC9BsH,EAAoB,GAAKtH,GAAK,GAAKA,EAoPpC,IAAIuH,EAEYzB,EAnPhBwB,EAAoB,IAAM,GAE1BA,EAAoB,IAAM,GAErB1C,EAAepF,GAAMhB,OAAOmE,eAAeiC,EAAgB,IAAQ,CAACxF,IAAK,IAAMmC,OAAOC,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kqBAuR9F,IAIIgG,EAA0BC,EAAwB7D,EAAO8D,EAA0BtE,EAJnFuE,EAAU,CACbC,EAZmB,CACnBC,EAvBeC,GACRC,KAAKC,IAAIF,GAuBhBF,EApBeE,GACRC,KAAKE,IAAIH,GAoBhBI,EAjB+BC,EAAMC,EAAKC,GAC1Cd,EAAOe,WAAWH,EAAMC,EAAKA,EAAMC,IAiBnCE,EAVgCC,GAChCjB,EAAOzH,OArRR,CAAe2I,IACd,KAgRM,OAANC,MA2BDhL,KAAKkB,EAAae,IAChB1B,EAAuBW,EAAUgG,EAAgBjF,IAGnDjC,KAAKwB,EAAY,IACfjB,EAAuBiB,EAAU0F,GAEnClH,KAAK+D,YAAc,KACjB/D,KAAKwB,IAAYQ,MAAMF,GAASH,YAAYoC,YAAYjC,EAAMmI,KAAUjI,MAAMiJ,IAC5E,IAtDgCd,EAsD5Be,EAAMD,EAAShL,QACtB6J,EAA2BoB,EAAO,EAClCnB,EAAyBmB,EAAO,EAChChF,EAAQgF,EAAO,EACflB,EAA2BkB,EAAO,EAClCxF,EAAUwF,EAAO,EA3DkBf,EA4DtBe,EAAO,EACkB9C,OA5DtCA,EAAS+B,EACTN,EAAS,IAAInJ,WAAWyJ,GAgCzB,CAAqBe,IACpBA,EAAO,KA2BPC,CAAYD,GACZxE,OAGD1G,KAAK0G,MAAQ,IAAIpF,SAAQC,IACxBmF,EAAQnF,KACNS,MAAK,KACPhC,KAAK+F,EAAOqC,EACZpI,KAAK0F,EAAUA,EACf1F,KAAKkG,EAAQA,EACblG,KAAK8J,GAA2BA,EAChC9J,KAAKgK,GAA2BA,EAChChK,KAAK+J,GAAyBA,KAExB/J,MAGP,SAASoL,EAAerE,EAAU,IA2IhC,OAzIKqE,EAAeC,IAElBvK,OAAOC,iBAAiBqK,EAAgB,CACtCC,GAAQ,CACNrK,MAAO,IAAIiD,IAAI,CACb,EAAE,EAAG,wCACL,EAAE,EAAG,iGACL,EAAE,IAAK,+FACP,EAAE,IAAK,yJACP,EAAE,IAAK,uGACP,EAAE,IAAK,iEACP,EAAE,IAAK,6QACP,EAAE,IAAK,4HACP,EAAE,IAAK,wEACP,EAAE,IAAK,yMACP,EAAE,IAAK,wKACP,EAAE,IAAK,yFACP,EAAE,IAAK,gGACP,EAAE,IAAK,8BAMfjE,KAAKsL,GAAQ,IACJ,IAAItL,KAAKsH,GAAwBtH,MACrC+D,cACA/B,MAAMuJ,IACLvL,KAAKwL,GAAUD,EAEfvL,KAAKyL,GAAmBzL,KAAKwL,GAAQlG,EAAmB,EAAGoG,aAE3D1L,KAAK2L,GAAW3L,KAAKwL,GAAQ1J,EAAKkI,GAChChK,KAAK4L,OAKb9K,OAAOmE,eAAejF,KAAM,QAAS,CACnCkF,GAAY,EACZxD,IAAK,IAAM1B,KAAK6L,KAGlB7L,KAAKgI,MAAQ,KACXhI,KAAKgG,OACEhG,KAAKsL,MAGdtL,KAAKgG,KAAO,KACVhG,KAAKwL,GAAQ1J,EAAKiI,GAAuB/J,KAAK2L,IAC9C3L,KAAKwL,GAAQxF,QAGfhG,KAAK8L,OAAU7J,IACb,KAAMA,aAAgBvB,YACpB,MAAMqL,MACJ,yDAA2D9J,GAG/D,IAAIkB,EAAS,GACX6I,EAAiB,EACjBzJ,EAAS,EAEX,IACE,MAAM0J,EAAahK,EAAKG,OAExB,KAAOG,EAAS0J,GAAY,CAC1B,MAAMC,EAAajK,EAAK0B,SACtBpB,EACAA,GACGvC,KAAK2G,EAAOpB,EAAM0G,EAAa1J,EAC5B0J,EAAa1J,EACbvC,KAAK2G,EAAOpB,IAGd4G,EAAmBD,EAAW9J,OACpCG,GAAU4J,EAEVnM,KAAK2G,EAAOb,EAAIzE,IAAI6K,GAEpB,MAAMxJ,EAAiB1C,KAAKwL,GAAQ1J,EAAKgI,GACvC9J,KAAK2L,GACL3L,KAAK2G,EAAOlB,EACZ0G,EACAnM,KAAKyL,GAAiBhG,EACtBzF,KAAK4G,EAAQnB,GAGf,GAAI/C,EAAiB,EAAG,KAAM,CAAE0J,KAAM1J,GAEtCsJ,GAAkBtJ,EAClBS,EAAOF,KACLjD,KAAKwL,GAAQpG,EACXpF,KAAK4G,EAAQd,EACb9F,KAAKyL,GAAiB3F,EAAI,GAC1BpD,KAIN,MAAOtC,GACP,MAAMiM,EAAYjM,EAAEgM,KAEpB,GAAIC,EACF,MAAUN,MACR,eACEM,EACA,KACCjB,EAAeC,GAAO3J,IAAI2K,IAAc,kBAE/C,MAAMjM,EAGR,OAAOJ,KAAKsH,GAAwB1E,EAClCO,EACAnD,KAAKyL,GAAiB3F,EAAI,GAC1BkG,EACA,OAKJhM,KAAKsM,GAAelB,EAAetD,EACnC9H,KAAKsH,GACH8D,EAAe7K,GAA0BA,EAC3CP,KAAKqG,EAAkB+E,EAAelE,GAAkBA,EACxDlH,KAAKoG,EAAUgF,EAAehK,EAE9BpB,KAAK4L,GAAe7E,EAAQwF,KAAe,EAE3CvM,KAAKsG,EAAa,MAGlBtG,KAAKwG,EAAqB,OAC1BxG,KAAKuG,EAAkB,EAEvBvG,KAAK6L,GAAS7L,KAAKsL,KAEZtL,KAaTC,EAAQmL,eAAiBA,EACzBnL,EAAQuM,wBAXR,cAAsC3F,EACpCC,YAAYC,GACViC,MAAMjC,EAAS,mBAAoBqE,EAAgBlE,GAGrDuC,aAAaxH,GACX,OAAOjC,KAAKwJ,EAAe,SAAUvH,KAOzCnB,OAAOmE,eAAehF,EAAS,KAAc,CAAEe,OAAO,KAh4BnC,iBAAZf,SAA0C,oBAAXmB,OAAyBrB,EAAQE,QAASwM,QAAQ,eACtE,mBAAXC,QAAyBA,OAAOC,IAAMD,OAAO,CAAC,UAAW,cAAe3M,GACJA,GAA1ED,EAA+B,oBAAf8M,WAA6BA,WAAa9M,GAAU4H,MAAqB,oBAAsB,GAAI5H,EAAOI"}